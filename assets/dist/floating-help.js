(()=>{(function(){"use strict";let r=document.getElementById("humata-floating-help");if(!r)return;let n=r.querySelector(".humata-floating-help__wrapper"),c=r.querySelector(".humata-floating-help__button"),d=r.querySelector(".humata-floating-help__panel");function f(){try{return!!(window.matchMedia&&window.matchMedia("(hover: none), (pointer: coarse)").matches)}catch(e){return"ontouchstart"in window}}let a=f(),i=null;function s(e){c&&(c.setAttribute("aria-expanded",e?"true":"false"),d&&d.setAttribute("aria-hidden",e?"false":"true"))}function p(){n&&(n.classList.add("is-open"),s(!0))}function u(){n&&(n.classList.remove("is-open"),s(!1))}function h(){n&&(n.classList.contains("is-open")?u():p())}function v(e){return document.getElementById("humata-help-modal-"+e)}function g(e,o){let t=v(e);if(!t)return;i=o||document.activeElement,t.hidden=!1,t.classList.add("is-open"),t.setAttribute("aria-hidden","false"),document.documentElement.classList.add("humata-help-modal-open"),document.body.classList.add("humata-help-modal-open");let l=t.querySelector(".humata-help-modal__close");if(l)try{l.focus({preventScroll:!0})}catch(E){l.focus()}}function m(e){if(e){if(e.classList.remove("is-open"),e.setAttribute("aria-hidden","true"),e.hidden=!0,document.documentElement.classList.remove("humata-help-modal-open"),document.body.classList.remove("humata-help-modal-open"),i&&typeof i.focus=="function")try{i.focus({preventScroll:!0})}catch(o){i.focus()}i=null}}function y(){let e=document.querySelector(".humata-help-modal.is-open");return e?(m(e),!0):!1}function L(){!c||!n||(c.addEventListener("click",function(e){a&&(e.preventDefault(),e.stopPropagation(),h())}),document.addEventListener("click",function(e){a&&(n.contains(e.target)||u())},!0))}function M(){r.addEventListener("click",function(e){let o=e.target.closest("[data-humata-help-open-modal]");if(!o)return;e.preventDefault();let t=String(o.getAttribute("data-humata-help-open-modal")||"").trim();t&&(a&&u(),g(t,o))}),document.addEventListener("click",function(e){let o=e.target.closest("[data-humata-help-close-modal]");if(!o)return;let t=o.closest(".humata-help-modal");t&&(e.preventDefault(),m(t))}),document.addEventListener("keydown",function(e){if(e.key==="Escape"){if(y()){e.preventDefault();return}a&&n&&n.classList.contains("is-open")&&u()}})}window.addEventListener("resize",function(){let e=f();e!==a&&(a=e,u())}),s(!1),L(),M()})();})();
//# sourceMappingURL=floating-help.js.map
