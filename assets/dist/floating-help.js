(()=>{(function(){"use strict";let n=document.getElementById("humata-floating-help");if(!n)return;let t=n.querySelector(".humata-floating-help__wrapper"),r=n.querySelector(".humata-floating-help__button"),d=n.querySelector(".humata-floating-help__panel");function c(){try{return!!(window.matchMedia&&window.matchMedia("(hover: none), (pointer: coarse)").matches)}catch(e){return"ontouchstart"in window}}let u=c(),a=null;function o(e){r&&(r.setAttribute("aria-expanded",e?"true":"false"),d&&d.setAttribute("aria-hidden",e?"false":"true"))}function i(){t&&(t.classList.add("is-open"),o(!0))}function f(){t&&(t.classList.remove("is-open"),o(!1))}function m(){t&&(t.classList.contains("is-open")?f():i())}function y(e){return document.getElementById("humata-help-modal-"+e)}function v(e,l){let s=y(e);if(!s)return;a=l||document.activeElement,s.hidden=!1,s.classList.add("is-open"),s.setAttribute("aria-hidden","false"),document.documentElement.classList.add("humata-help-modal-open"),document.body.classList.add("humata-help-modal-open");let p=s.querySelector(".humata-help-modal__close");if(p)try{p.focus({preventScroll:!0})}catch(_){p.focus()}}function h(e){if(e){if(e.classList.remove("is-open"),e.setAttribute("aria-hidden","true"),e.hidden=!0,document.documentElement.classList.remove("humata-help-modal-open"),document.body.classList.remove("humata-help-modal-open"),a&&typeof a.focus=="function")try{a.focus({preventScroll:!0})}catch(l){a.focus()}a=null}}function g(){let e=document.querySelector(".humata-help-modal.is-open");return e?(h(e),!0):!1}function b(){!r||!t||(r.addEventListener("click",function(e){u&&(e.preventDefault(),e.stopPropagation(),m())}),document.addEventListener("click",function(e){u&&(t.contains(e.target)||f())},!0))}function E(){n.addEventListener("click",function(e){let l=e.target.closest("[data-humata-help-open-modal]");if(!l)return;e.preventDefault();let s=String(l.getAttribute("data-humata-help-open-modal")||"").trim();s&&(u&&f(),v(s,l))}),document.addEventListener("click",function(e){let l=e.target.closest("[data-humata-help-close-modal]");if(!l)return;let s=l.closest(".humata-help-modal");s&&(e.preventDefault(),h(s))}),document.addEventListener("keydown",function(e){if(e.key==="Escape"){if(g()){e.preventDefault();return}u&&t&&t.classList.contains("is-open")&&f()}})}window.addEventListener("resize",function(){let e=c();e!==u&&(u=e,f())}),o(!1),b(),E()})();function L(){typeof window!="undefined"&&(window.__humataModalFocusTrapInstalled||(window.__humataModalFocusTrapInstalled=!0,document.addEventListener("keydown",function(n){if(n.key!=="Tab")return;let t=document.querySelector(".humata-help-modal.is-open");if(!t)return;let r=t.querySelector(".humata-help-modal__dialog");if(!r)return;let d=r.querySelectorAll('a[href], area[href], button:not([disabled]), input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), iframe, object, embed, [contenteditable], [tabindex]:not([tabindex="-1"])'),c=Array.prototype.slice.call(d).filter(function(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length)});if(!c.length)return;let u=c[0],a=c[c.length-1],o=document.activeElement;if(!r.contains(o)){n.preventDefault(),n.shiftKey?a.focus():u.focus();return}if(n.shiftKey&&o===u){n.preventDefault(),a.focus();return}!n.shiftKey&&o===a&&(n.preventDefault(),u.focus())})))}function w(){let n=document.getElementById("humata-floating-help");if(!n)return;let t=n.querySelector(".humata-floating-help__wrapper"),r=n.querySelector(".humata-floating-help__button"),d=n.querySelector(".humata-floating-help__panel");if(!t||!r||!d)return;function c(i){r.setAttribute("aria-expanded",i?"true":"false"),d.setAttribute("aria-hidden",i?"false":"true")}function u(){try{return t.classList.contains("is-open")||t.matches(":hover")||t.matches(":focus-within")}catch(i){return t.classList.contains("is-open")}}let a=null;function o(){let i=u();i!==a&&(a=i,c(i))}o(),t.addEventListener("mouseenter",o),t.addEventListener("mouseleave",o),t.addEventListener("focusin",o),t.addEventListener("focusout",function(){setTimeout(o,0)}),r.addEventListener("click",function(){setTimeout(o,0)}),document.addEventListener("click",function(){setTimeout(o,0)},!0)}L();w();})();
//# sourceMappingURL=floating-help.js.map
