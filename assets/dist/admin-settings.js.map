{
  "version": 3,
  "sources": ["../src/admin/settings/index.js"],
  "sourcesContent": ["/* global jQuery, wp */\n\n(function($) {\n    'use strict';\n\n    $(function() {\n        var config = window.humataAdminConfig || {};\n        var humataAdminNonce = String(config.nonce || '');\n\n        // Back-compat: the previous inline scripts used `window.humataDocumentTitles`.\n        if (config.documentTitles && typeof config.documentTitles === 'object') {\n            window.humataDocumentTitles = config.documentTitles;\n        } else if (!window.humataDocumentTitles || typeof window.humataDocumentTitles !== 'object') {\n            window.humataDocumentTitles = {};\n        }\n\n        // Prefer configured ajax URL, fallback to WP admin global.\n        var ajaxurl = String(config.ajaxUrl || window.ajaxurl || '');\n\n        // Shared utility: safely parse integer with fallback.\n        function humataSafeInt(value, fallback) {\n            var n = parseInt(value, 10);\n            return (isFinite(n) && n >= 0) ? n : (fallback || 0);\n        }\n\n        // ---------------------------\n        // Document IDs UI + API tests\n        // ---------------------------\n\n        (function() {\n            var humataTitles = window.humataDocumentTitles || {};\n            var humataTitleNotFetchedText = (config.i18n && typeof config.i18n.titleNotFetchedText === 'string')\n                ? config.i18n.titleNotFetchedText\n                : \"(title not fetched)\";\n            var humataDocsPerPage = 100;\n            var humataDocsPage = 0;\n\n            function humataExtractIds(text) {\n                var matches = (text || \"\").match(/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/ig) || [];\n                var seen = {};\n                var unique = [];\n                $.each(matches, function(_, id) {\n                    id = id.toLowerCase();\n                    if (!seen[id]) {\n                        seen[id] = true;\n                        unique.push(id);\n                    }\n                });\n                return unique;\n            }\n\n            function humataGetTokenIds() {\n                return $(\"#humata-document-ids-tokens .humata-token\").map(function() {\n                    return ($(this).attr(\"data-id\") || \"\").toLowerCase();\n                }).get();\n            }\n\n            function humataGetLabelForId(id) {\n                id = (id || \"\").toLowerCase();\n                if (humataTitles[id]) {\n                    return humataTitles[id];\n                }\n                return id;\n            }\n\n            function humataSortTokens() {\n                var $container = $(\"#humata-document-ids-tokens\");\n                var tokens = $container.children(\".humata-token\").get();\n                tokens.sort(function(a, b) {\n                    var aId = ($(a).attr(\"data-id\") || \"\").toLowerCase();\n                    var bId = ($(b).attr(\"data-id\") || \"\").toLowerCase();\n                    var aLabel = $.trim(humataGetLabelForId(aId) || aId).toLowerCase();\n                    var bLabel = $.trim(humataGetLabelForId(bId) || bId).toLowerCase();\n\n                    if (aLabel === bLabel) {\n                        return bId.localeCompare(aId);\n                    }\n                    return bLabel.localeCompare(aLabel);\n                });\n                $.each(tokens, function(_, el) {\n                    $container.append(el);\n                });\n            }\n\n            function humataAddToken(id) {\n                id = (id || \"\").toLowerCase();\n                if (!id) {\n                    return;\n                }\n\n                if ($(\"#humata-document-ids-tokens .humata-token[data-id=\\\"\" + id + \"\\\"]\").length) {\n                    return;\n                }\n\n                var $token = $(\"<span></span>\")\n                    .addClass(\"humata-token\")\n                    .attr(\"data-id\", id)\n                    .attr(\"title\", humataGetLabelForId(id));\n\n                var $label = $(\"<span></span>\")\n                    .addClass(\"humata-token-label\")\n                    .text(humataGetLabelForId(id));\n\n                var $remove = $(\"<button></button>\")\n                    .attr(\"type\", \"button\")\n                    .addClass(\"humata-token-remove\")\n                    .attr(\"aria-label\", \"Remove\")\n                    .text(\"\u00D7\");\n\n                $token.append($label).append($remove);\n                $(\"#humata-document-ids-tokens\").append($token);\n            }\n\n            function humataSyncHiddenAndCount() {\n                var ids = humataGetTokenIds();\n                $(\"#humata_document_ids\").val(ids.join(\", \"));\n                $(\"#humata-document-count\").text(ids.length);\n            }\n\n            function humataRenderDocumentsPagination(total) {\n                var $pager = $(\"#humata-documents-pagination\");\n                if (!$pager.length) {\n                    return;\n                }\n\n                $pager.empty();\n\n                if (!total || total <= humataDocsPerPage) {\n                    return;\n                }\n\n                var totalPages = Math.max(1, Math.ceil(total / humataDocsPerPage));\n                var currentPage = humataDocsPage + 1;\n                var start = (humataDocsPage * humataDocsPerPage) + 1;\n                var end = Math.min((humataDocsPage + 1) * humataDocsPerPage, total);\n\n                var $prev = $(\"<button></button>\")\n                    .attr(\"type\", \"button\")\n                    .addClass(\"button button-secondary\")\n                    .attr(\"id\", \"humata-documents-page-prev\")\n                    .text(\"Previous\")\n                    .prop(\"disabled\", humataDocsPage <= 0);\n\n                var $next = $(\"<button></button>\")\n                    .attr(\"type\", \"button\")\n                    .addClass(\"button button-secondary\")\n                    .attr(\"id\", \"humata-documents-page-next\")\n                    .text(\"Next\")\n                    .prop(\"disabled\", humataDocsPage >= totalPages - 1);\n\n                var $info = $(\"<span></span>\")\n                    .addClass(\"humata-documents-page-info\")\n                    .text(\"Showing \" + start + \"\u2013\" + end + \" of \" + total + \" (Page \" + currentPage + \"/\" + totalPages + \")\");\n\n                $pager.append($prev).append($info).append($next);\n            }\n\n            function humataSyncDocumentsTable() {\n                var $tbody = $(\"#humata-documents-table-body\");\n                if (!$tbody.length) {\n                    return;\n                }\n\n                var ids = humataGetTokenIds();\n                var total = ids.length;\n\n                if (!total) {\n                    $tbody.empty();\n                    humataRenderDocumentsPagination(0);\n                    return;\n                }\n\n                var totalPages = Math.max(1, Math.ceil(total / humataDocsPerPage));\n                if (humataDocsPage >= totalPages) {\n                    humataDocsPage = totalPages - 1;\n                }\n                if (humataDocsPage < 0) {\n                    humataDocsPage = 0;\n                }\n\n                var startIndex = humataDocsPage * humataDocsPerPage;\n                var endIndex = Math.min(startIndex + humataDocsPerPage, total);\n                var pageIds = ids.slice(startIndex, endIndex);\n\n                $tbody.empty();\n\n                $.each(pageIds, function(_, id) {\n                    var title = humataTitles[id] ? humataTitles[id] : humataTitleNotFetchedText;\n                    var $row = $(\"<tr></tr>\").attr(\"data-doc-id\", id);\n                    $row.append($(\"<td></td>\").addClass(\"humata-doc-title\").text(title));\n                    $row.append($(\"<td></td>\").append($(\"<code></code>\").text(id)));\n                    $tbody.append($row);\n                });\n\n                humataRenderDocumentsPagination(total);\n            }\n\n            function humataAddTokensFromText(text) {\n                var ids = humataExtractIds(text);\n                if (!ids.length) {\n                    return false;\n                }\n\n                $.each(ids, function(_, id) {\n                    humataAddToken(id);\n                });\n\n                humataSortTokens();\n                humataSyncHiddenAndCount();\n                humataSyncDocumentsTable();\n                return true;\n            }\n\n            function humataInitTokensFromHidden() {\n                var $hidden = $(\"#humata_document_ids\");\n                var $tokens = $(\"#humata-document-ids-tokens\");\n                if (!$hidden.length || !$tokens.length) {\n                    return;\n                }\n\n                var ids = humataExtractIds($hidden.val());\n                $tokens.empty();\n                $.each(ids, function(_, id) {\n                    humataAddToken(id);\n                });\n\n                humataSortTokens();\n                humataSyncHiddenAndCount();\n                humataSyncDocumentsTable();\n            }\n\n            humataInitTokensFromHidden();\n\n            $(document).on(\"click\", \"#humata-documents-page-prev\", function() {\n                if (humataDocsPage > 0) {\n                    humataDocsPage--;\n                    humataSyncDocumentsTable();\n                }\n            });\n\n            $(document).on(\"click\", \"#humata-documents-page-next\", function() {\n                var total = humataGetTokenIds().length;\n                var totalPages = Math.max(1, Math.ceil(total / humataDocsPerPage));\n                if (humataDocsPage < totalPages - 1) {\n                    humataDocsPage++;\n                    humataSyncDocumentsTable();\n                }\n            });\n\n            $(document).on(\"click\", \"#humata-document-ids-control, #humata-document-ids-tokens\", function(e) {\n                if ($(e.target).closest(\".humata-token-remove\").length) {\n                    return;\n                }\n                $(\"#humata_document_ids_input\").trigger(\"focus\");\n            });\n\n            $(document).on(\"click\", \".humata-token-remove\", function() {\n                $(this).closest(\".humata-token\").remove();\n                humataSyncHiddenAndCount();\n                humataSyncDocumentsTable();\n            });\n\n            $(document).on(\"keydown\", \"#humata_document_ids_input\", function(e) {\n                var key = e.key;\n                if (key === \",\" || key === \"Enter\" || key === \"Tab\") {\n                    var val = $(this).val();\n                    var added = humataAddTokensFromText(val);\n\n                    if (key === \"Enter\" || key === \",\") {\n                        e.preventDefault();\n                        if (added) {\n                            $(this).val(\"\");\n                        }\n                        return;\n                    }\n\n                    if (key === \"Tab\" && added) {\n                        e.preventDefault();\n                        $(this).val(\"\");\n                        return;\n                    }\n                }\n\n                if (key === \"Backspace\" && $(this).val() === \"\") {\n                    var $last = $(\"#humata-document-ids-tokens .humata-token\").last();\n                    if ($last.length) {\n                        $last.remove();\n                        humataSyncHiddenAndCount();\n                        humataSyncDocumentsTable();\n                        e.preventDefault();\n                    }\n                }\n            });\n\n            $(document).on(\"paste\", \"#humata_document_ids_input\", function() {\n                var $input = $(this);\n                setTimeout(function() {\n                    var added = humataAddTokensFromText($input.val());\n                    if (added) {\n                        $input.val(\"\");\n                    }\n                }, 0);\n            });\n\n            $(document).on(\"blur\", \"#humata_document_ids_input\", function() {\n                var val = $(this).val();\n                var added = humataAddTokensFromText(val);\n                if (added) {\n                    $(this).val(\"\");\n                }\n            });\n\n            // Document IDs: Import / Export\n            function humataSetIoStatus(message, kind) {\n                var $status = $(\"#humata-document-ids-io-status\");\n                if (!$status.length) {\n                    return;\n                }\n\n                $status.removeClass(\"humata-io-status-success humata-io-status-error humata-io-status-info\");\n                if (kind === \"success\") {\n                    $status.addClass(\"humata-io-status-success\");\n                } else if (kind === \"error\") {\n                    $status.addClass(\"humata-io-status-error\");\n                } else if (kind === \"info\") {\n                    $status.addClass(\"humata-io-status-info\");\n                }\n\n                $status.text(message || \"\");\n            }\n\n            function humataExportIdsToText() {\n                var ids = humataGetTokenIds();\n                if (!ids || !ids.length) {\n                    return \"\";\n                }\n                return ids.join(\"\\\\n\");\n            }\n\n            function humataDownloadFile(filename, content, mimeType) {\n                try {\n                    var mime = mimeType || \"text/plain;charset=utf-8\";\n                    var blob = new Blob([content || \"\"], { type: mime });\n                    var url = URL.createObjectURL(blob);\n                    var a = document.createElement(\"a\");\n                    a.href = url;\n                    a.download = filename || \"humata-document-ids.txt\";\n                    document.body.appendChild(a);\n                    a.click();\n                    setTimeout(function() {\n                        try { document.body.removeChild(a); } catch (e) {}\n                        try { URL.revokeObjectURL(url); } catch (e) {}\n                    }, 0);\n                } catch (e) {\n                    humataSetIoStatus(\"Download failed.\", \"error\");\n                }\n            }\n\n            function humataCopyToClipboard(text) {\n                if (navigator.clipboard && navigator.clipboard.writeText) {\n                    return navigator.clipboard.writeText(text);\n                }\n\n                // Fallback: prompt user to manually copy since clipboard API is unavailable\n                return humataPromptManualCopy(text);\n            }\n\n            function humataPromptManualCopy(text) {\n                return new Promise(function(resolve, reject) {\n                    var isMac = /Mac|iPhone|iPad|iPod/i.test(navigator.platform || navigator.userAgent);\n                    var shortcut = isMac ? \"Cmd+C\" : \"Ctrl+C\";\n                    var message = \"Press \" + shortcut + \" to copy\";\n\n                    // Show toast notification\n                    humataShowCopyToast(message);\n\n                    var $temp = $(\"<textarea></textarea>\")\n                        .attr(\"readonly\", \"\")\n                        .attr(\"aria-label\", \"Text to copy\")\n                        .css({\n                            position: \"fixed\",\n                            top: \"50%\",\n                            left: \"50%\",\n                            transform: \"translate(-50%, -50%)\",\n                            width: \"1px\",\n                            height: \"1px\",\n                            padding: \"0\",\n                            border: \"none\",\n                            outline: \"none\",\n                            opacity: \"0\",\n                            zIndex: \"999999\"\n                        })\n                        .val(text || \"\");\n\n                    $(\"body\").append($temp);\n                    $temp[0].focus();\n                    $temp[0].select();\n                    $temp[0].setSelectionRange(0, $temp[0].value.length);\n\n                    function handleCopy() {\n                        cleanup();\n                        resolve();\n                    }\n\n                    function handleKeydown(e) {\n                        if (e.key === \"Escape\") {\n                            cleanup();\n                            reject(new Error(\"copy_cancelled\"));\n                        }\n                    }\n\n                    function cleanup() {\n                        $(document).off(\"copy\", handleCopy);\n                        $(document).off(\"keydown\", handleKeydown);\n                        $temp.remove();\n                        humataHideCopyToast();\n                    }\n\n                    $(document).on(\"copy\", handleCopy);\n                    $(document).on(\"keydown\", handleKeydown);\n\n                    // Auto-cleanup after 10 seconds\n                    setTimeout(function() {\n                        cleanup();\n                        reject(new Error(\"copy_timeout\"));\n                    }, 10000);\n                });\n            }\n\n            function humataShowCopyToast(message) {\n                humataHideCopyToast();\n                var $toast = $(\"<div></div>\")\n                    .attr(\"id\", \"humata-admin-copy-toast\")\n                    .text(message)\n                    .css({\n                        position: \"fixed\",\n                        top: \"20px\",\n                        left: \"50%\",\n                        transform: \"translateX(-50%)\",\n                        background: \"#333\",\n                        color: \"#fff\",\n                        padding: \"12px 24px\",\n                        borderRadius: \"8px\",\n                        fontSize: \"14px\",\n                        zIndex: \"999999\",\n                        boxShadow: \"0 4px 12px rgba(0,0,0,0.3)\"\n                    });\n                $(\"body\").append($toast);\n            }\n\n            function humataHideCopyToast() {\n                $(\"#humata-admin-copy-toast\").remove();\n            }\n\n            function humataGetImportMode() {\n                var $checked = $(\"input[name=\\\"humata_document_ids_import_mode\\\"]:checked\");\n                var mode = $checked.length ? String($checked.val() || \"\") : \"\";\n                mode = $.trim(mode);\n                return mode === \"replace\" ? \"replace\" : \"merge\";\n            }\n\n            function humataApplyImportedText(text, mode) {\n                var importText = String(text || \"\");\n                var importMode = mode === \"replace\" ? \"replace\" : \"merge\";\n\n                var existingCount = humataGetTokenIds().length;\n                var ids = humataExtractIds(importText);\n\n                if (!ids.length) {\n                    humataSetIoStatus(\"No valid UUIDs found to import.\", \"error\");\n                    return false;\n                }\n\n                var beforeCount = existingCount;\n                if (importMode === \"replace\") {\n                    $(\"#humata-document-ids-tokens\").empty();\n                    humataDocsPage = 0;\n                    beforeCount = 0;\n                }\n\n                $.each(ids, function(_, id) {\n                    humataAddToken(id);\n                });\n\n                humataSortTokens();\n                humataSyncHiddenAndCount();\n                humataSyncDocumentsTable();\n\n                var afterCount = humataGetTokenIds().length;\n                if (importMode === \"merge\") {\n                    var addedCount = Math.max(0, afterCount - beforeCount);\n                    var dupCount = Math.max(0, ids.length - addedCount);\n                    humataSetIoStatus(\"Imported \" + addedCount + \" IDs (\" + dupCount + \" duplicates ignored). Click Save Settings to persist.\", \"success\");\n                } else {\n                    humataSetIoStatus(\"Replaced \" + existingCount + \" IDs with \" + afterCount + \" imported IDs. Click Save Settings to persist.\", \"success\");\n                }\n\n                return true;\n            }\n\n            $(document).on(\"click\", \"#humata-document-ids-export-copy\", function() {\n                var text = humataExportIdsToText();\n                var count = humataGetTokenIds().length;\n                if (!text) {\n                    humataSetIoStatus(\"No document IDs to export.\", \"error\");\n                    return;\n                }\n\n                humataCopyToClipboard(text).then(function() {\n                    humataSetIoStatus(\"Copied \" + count + \" IDs to clipboard.\", \"success\");\n                }).catch(function() {\n                    humataSetIoStatus(\"Copy failed. Try Download TXT instead.\", \"error\");\n                });\n            });\n\n            $(document).on(\"click\", \"#humata-document-ids-export-download\", function() {\n                var ids = humataGetTokenIds();\n                if (!ids.length) {\n                    humataSetIoStatus(\"No document IDs to export.\", \"error\");\n                    return;\n                }\n                var content = ids.join(\"\\\\n\") + \"\\\\n\";\n                humataDownloadFile(\"humata-document-ids.txt\", content, \"text/plain;charset=utf-8\");\n                humataSetIoStatus(\"Downloaded TXT for \" + ids.length + \" IDs.\", \"info\");\n            });\n\n            $(document).on(\"click\", \"#humata-document-ids-export-download-json\", function() {\n                var ids = humataGetTokenIds();\n                if (!ids.length) {\n                    humataSetIoStatus(\"No document IDs to export.\", \"error\");\n                    return;\n                }\n                var json = JSON.stringify({ document_ids: ids }, null, 2);\n                humataDownloadFile(\"humata-document-ids.json\", json + \"\\\\n\", \"application/json;charset=utf-8\");\n                humataSetIoStatus(\"Downloaded JSON for \" + ids.length + \" IDs.\", \"info\");\n            });\n\n            $(document).on(\"change\", \"#humata-document-ids-import-file\", function() {\n                var input = this;\n                var file = input && input.files && input.files[0] ? input.files[0] : null;\n                if (!file) {\n                    return;\n                }\n\n                var reader = new FileReader();\n                reader.onload = function(e) {\n                    var text = (e && e.target && e.target.result) ? String(e.target.result) : \"\";\n                    $(\"#humata-document-ids-import-text\").val(text);\n                    humataSetIoStatus(\"Loaded file. Choose Merge/Replace and click Apply Import.\", \"info\");\n                };\n                reader.onerror = function() {\n                    humataSetIoStatus(\"Failed to read file.\", \"error\");\n                };\n\n                try {\n                    reader.readAsText(file);\n                } catch (e) {\n                    humataSetIoStatus(\"Failed to read file.\", \"error\");\n                }\n            });\n\n            $(document).on(\"click\", \"#humata-document-ids-import-apply\", function() {\n                var text = $(\"#humata-document-ids-import-text\").val();\n                var mode = humataGetImportMode();\n                humataApplyImportedText(text, mode);\n            });\n\n            $(document).on(\"click\", \"#humata-document-ids-clear-all\", function() {\n                var count = humataGetTokenIds().length;\n                if (!count) {\n                    humataSetIoStatus(\"No document IDs to clear.\", \"info\");\n                    return;\n                }\n\n                if (!window.confirm(\"Remove all configured Document IDs?\")) {\n                    return;\n                }\n\n                $(\"#humata-document-ids-tokens\").empty();\n                humataDocsPage = 0;\n                humataSyncHiddenAndCount();\n                humataSyncDocumentsTable();\n                humataSetIoStatus(\"Cleared all Document IDs. Click Save Settings to persist.\", \"success\");\n            });\n\n            $(\"#humata-test-api\").on(\"click\", function() {\n                var $btn = $(this);\n                var $result = $(\"#humata-test-result\");\n                $btn.prop(\"disabled\", true).text(\"Testing...\");\n                $result.html(\"\");\n                $.post(ajaxurl, {\n                    action: \"humata_test_api\",\n                    nonce: humataAdminNonce\n                }, function(response) {\n                    $btn.prop(\"disabled\", false).text(\"Test API Connection\");\n                    if (response.success) {\n                        $result.html(\"<span style=\\\"color:green;\\\">\u2713 \" + response.data.message + \"</span>\");\n                    } else {\n                        $result.html(\"<span style=\\\"color:red;\\\">\u2717 \" + response.data.message + \"</span>\");\n                    }\n                }).fail(function() {\n                    $btn.prop(\"disabled\", false).text(\"Test API Connection\");\n                    $result.html(\"<span style=\\\"color:red;\\\">\u2717 Request failed</span>\");\n                });\n            });\n            $(\"#humata-clear-cache\").on(\"click\", function() {\n                var $btn = $(this);\n                $btn.prop(\"disabled\", true).text(\"Clearing...\");\n                $.post(ajaxurl, {\n                    action: \"humata_clear_cache\",\n                    nonce: humataAdminNonce\n                }, function(response) {\n                    $btn.prop(\"disabled\", false).text(\"Clear Cache\");\n                    if (response.success) {\n                        alert(\"Cache cleared!\");\n                        location.reload();\n                    } else {\n                        alert(\"Failed to clear cache.\");\n                    }\n                });\n            });\n            $(\"#humata-test-ask\").on(\"click\", function() {\n                var $btn = $(this);\n                var $result = $(\"#humata-test-result\");\n                $btn.prop(\"disabled\", true).text(\"Testing Ask...\");\n                $result.html(\"\");\n                $.post(ajaxurl, {\n                    action: \"humata_test_ask\",\n                    nonce: humataAdminNonce\n                }, function(response) {\n                    $btn.prop(\"disabled\", false).text(\"Test Ask\");\n                    if (response.success) {\n                        $result.html(\"<span style=\\\"color:green;\\\">\u2713 \" + response.data.message + \"</span>\");\n                    } else {\n                        $result.html(\"<span style=\\\"color:red;\\\">\u2717 \" + response.data.message + \"</span>\");\n                    }\n                }).fail(function() {\n                    $btn.prop(\"disabled\", false).text(\"Test Ask\");\n                    $result.html(\"<span style=\\\"color:red;\\\">\u2717 Request failed</span>\");\n                });\n            });\n\n            $(\"#humata-fetch-titles\").on(\"click\", function() {\n                var $btn = $(this);\n                var $result = $(\"#humata-test-result\");\n                var offset = 0;\n                var limit = 5;\n                var delayMs = 2000;\n                var documentIds = $(\"#humata_document_ids\").val();\n\n                $btn.prop(\"disabled\", true).text(\"Fetching...\");\n                $result.html(\"\");\n\n                function fetchBatch() {\n                    $.post(ajaxurl, {\n                        action: \"humata_fetch_titles\",\n                        nonce: humataAdminNonce,\n                        offset: offset,\n                        limit: limit,\n                        document_ids: documentIds\n                    }, function(response) {\n                        if (!response.success) {\n                            $btn.prop(\"disabled\", false).text(\"Fetch Titles\");\n                            var msg = response.data && response.data.message ? response.data.message : \"Request failed\";\n                            if (response.data && response.data.errorMessage) {\n                                msg = msg + \" (\" + response.data.errorMessage + \")\";\n                            }\n                            $result.html(\"<span style=\\\"color:red;\\\">\u2717 \" + msg + \"</span>\");\n                            return;\n                        }\n\n                        if (response.data && response.data.titles) {\n                            $.each(response.data.titles, function(docId, title) {\n                                docId = (docId || \"\").toLowerCase();\n                                if (!docId || !title) {\n                                    return;\n                                }\n\n                                humataTitles[docId] = title;\n\n                                var $token = $(\"#humata-document-ids-tokens .humata-token[data-id=\\\"\" + docId + \"\\\"]\");\n                                $token.find(\".humata-token-label\").text(title);\n                                $token.attr(\"title\", title);\n\n                                $(\"#humata-documents-table-body tr[data-doc-id=\\\"\" + docId + \"\\\"] .humata-doc-title\").text(title);\n                            });\n                        }\n\n                        humataSortTokens();\n                        humataSyncHiddenAndCount();\n                        humataSyncDocumentsTable();\n\n                        offset = response.data.nextOffset;\n                        var successMsg = response.data.message || \"\";\n                        if (response.data.errors && response.data.errorMessage) {\n                            successMsg = successMsg + \" (\" + response.data.errorMessage + \")\";\n                        }\n                        $result.html(\"<span style=\\\"color:green;\\\">\u2713 \" + successMsg + \"</span>\");\n\n                        if (response.data.done) {\n                            $btn.prop(\"disabled\", false).text(\"Fetch Titles\");\n                            return;\n                        }\n\n                        setTimeout(fetchBatch, delayMs);\n                    }).fail(function() {\n                        $btn.prop(\"disabled\", false).text(\"Fetch Titles\");\n                        $result.html(\"<span style=\\\"color:red;\\\">\u2717 Request failed</span>\");\n                    });\n                }\n\n                fetchBatch();\n            });\n        })();\n\n        // ---------------------------\n        // Search provider toggle (General tab)\n        // ---------------------------\n\n        (function() {\n            function humataGetSearchProvider() {\n                var $selected = $(\"input[name=\\\"humata_search_provider\\\"]:checked\");\n                var val = $selected.length ? String($selected.val() || \"\") : \"\";\n                val = $.trim(val);\n                if (!val) {\n                    val = \"humata\";\n                }\n                return val;\n            }\n\n            function humataToggleSearchProviderSections() {\n                // Only run on pages that have the search provider radio buttons (General tab)\n                if (!$(\"input[name=\\\"humata_search_provider\\\"]\").length) {\n                    return;\n                }\n\n                var provider = humataGetSearchProvider();\n                var isHumata = provider === \"humata\";\n                var isLocal = provider === \"local\";\n\n                // Humata API sections (API config, Humata system prompt, Second-stage prompt)\n                $(\"#humata_api_key\").closest(\"table\").closest(\"tbody\").parent().closest(\"table\").prev(\"h2:contains('Humata API')\").toggle(isHumata);\n                \n                // Find sections by their heading text and toggle visibility\n                $(\".form-table\").each(function() {\n                    var $table = $(this);\n                    var $heading = $table.prev(\"h2, p\").prev(\"h2\");\n                    if (!$heading.length) {\n                        $heading = $table.prev(\"h2\");\n                    }\n                    var headingText = $heading.text() || \"\";\n\n                    // Humata-specific sections (exclude Local Search sections)\n                    if ((headingText.indexOf(\"Humata API\") !== -1 ||\n                        headingText.indexOf(\"Humata System Prompt\") !== -1 ||\n                        headingText.indexOf(\"Second-Stage LLM System Prompt\") !== -1) &&\n                        headingText.indexOf(\"Local Search\") === -1) {\n                        $heading.toggle(isHumata);\n                        $heading.next(\"p\").toggle(isHumata);\n                        $table.toggle(isHumata);\n                    }\n\n                    // Local Search sections (first-stage and second-stage prompts)\n                    if (headingText.indexOf(\"Local Search\") !== -1) {\n                        $heading.toggle(isLocal);\n                        $heading.next(\"p\").toggle(isLocal);\n                        $table.toggle(isLocal);\n                    }\n                });\n            }\n\n            $(document).on(\"change\", \"input[name=\\\"humata_search_provider\\\"]\", humataToggleSearchProviderSections);\n            // Run on page load\n            setTimeout(humataToggleSearchProviderSections, 100);\n        })();\n\n        // ---------------------------\n        // Second-stage provider toggle (Humata Mode)\n        // ---------------------------\n\n        (function() {\n            function humataGetSecondLlmProvider() {\n                var $selected = $(\"input[name=\\\"humata_second_llm_provider\\\"]:checked\");\n                var val = $selected.length ? String($selected.val() || \"\") : \"\";\n                val = $.trim(val);\n                if (!val) {\n                    val = \"none\";\n                }\n                return val;\n            }\n\n            function humataToggleSecondLlmFields() {\n                var provider = humataGetSecondLlmProvider();\n                var showStraico = provider === \"straico\";\n                var showAnthropic = provider === \"anthropic\";\n                var showOpenRouter = provider === \"openrouter\";\n\n                $(\".humata-api-key-pool[data-option='humata_straico_api_key']\").closest(\"tr\").toggle(showStraico);\n                $(\"#humata_straico_model\").closest(\"tr\").toggle(showStraico);\n\n                $(\".humata-api-key-pool[data-option='humata_anthropic_api_key']\").closest(\"tr\").toggle(showAnthropic);\n                $(\"#humata_anthropic_model\").closest(\"tr\").toggle(showAnthropic);\n                $(\"#humata_anthropic_extended_thinking\").closest(\"tr\").toggle(showAnthropic);\n\n                $(\".humata-api-key-pool[data-option='humata_openrouter_api_key']\").closest(\"tr\").toggle(showOpenRouter);\n                $(\"#humata_openrouter_model\").closest(\"tr\").toggle(showOpenRouter);\n            }\n\n            $(document).on(\"change\", \"input[name=\\\"humata_second_llm_provider\\\"]\", humataToggleSecondLlmFields);\n            humataToggleSecondLlmFields();\n        })();\n\n        // ---------------------------\n        // Local Search first-stage provider toggle\n        // ---------------------------\n\n        (function() {\n            function humataGetLocalFirstProvider() {\n                var $selected = $(\"input[name=\\\"humata_local_first_llm_provider\\\"]:checked\");\n                var val = $selected.length ? String($selected.val() || \"\") : \"\";\n                val = $.trim(val);\n                if (!val) {\n                    val = \"straico\";\n                }\n                return val;\n            }\n\n            function humataToggleLocalFirstFields() {\n                var provider = humataGetLocalFirstProvider();\n                var showStraico = provider === \"straico\";\n                var showAnthropic = provider === \"anthropic\";\n                var showOpenRouter = provider === \"openrouter\";\n\n                $(\".humata-api-key-pool[data-option='humata_local_first_straico_api_key']\").closest(\"tr\").toggle(showStraico);\n                $(\"#humata_local_first_straico_model\").closest(\"tr\").toggle(showStraico);\n\n                $(\".humata-api-key-pool[data-option='humata_local_first_anthropic_api_key']\").closest(\"tr\").toggle(showAnthropic);\n                $(\"#humata_local_first_anthropic_model\").closest(\"tr\").toggle(showAnthropic);\n                $(\"#humata_local_first_anthropic_extended_thinking\").closest(\"tr\").toggle(showAnthropic);\n\n                $(\".humata-api-key-pool[data-option='humata_local_first_openrouter_api_key']\").closest(\"tr\").toggle(showOpenRouter);\n                $(\"#humata_local_first_openrouter_model\").closest(\"tr\").toggle(showOpenRouter);\n            }\n\n            $(document).on(\"change\", \"input[name=\\\"humata_local_first_llm_provider\\\"]\", humataToggleLocalFirstFields);\n            humataToggleLocalFirstFields();\n        })();\n\n        // ---------------------------\n        // Local Search second-stage provider toggle\n        // ---------------------------\n\n        (function() {\n            function humataGetLocalSecondProvider() {\n                var $selected = $(\"input[name=\\\"humata_local_second_llm_provider\\\"]:checked\");\n                var val = $selected.length ? String($selected.val() || \"\") : \"\";\n                val = $.trim(val);\n                if (!val) {\n                    val = \"none\";\n                }\n                return val;\n            }\n\n            function humataToggleLocalSecondFields() {\n                var provider = humataGetLocalSecondProvider();\n                var showStraico = provider === \"straico\";\n                var showAnthropic = provider === \"anthropic\";\n                var showOpenRouter = provider === \"openrouter\";\n\n                $(\".humata-api-key-pool[data-option='humata_local_second_straico_api_key']\").closest(\"tr\").toggle(showStraico);\n                $(\"#humata_local_second_straico_model\").closest(\"tr\").toggle(showStraico);\n\n                $(\".humata-api-key-pool[data-option='humata_local_second_anthropic_api_key']\").closest(\"tr\").toggle(showAnthropic);\n                $(\"#humata_local_second_anthropic_model\").closest(\"tr\").toggle(showAnthropic);\n                $(\"#humata_local_second_anthropic_extended_thinking\").closest(\"tr\").toggle(showAnthropic);\n\n                $(\".humata-api-key-pool[data-option='humata_local_second_openrouter_api_key']\").closest(\"tr\").toggle(showOpenRouter);\n                $(\"#humata_local_second_openrouter_model\").closest(\"tr\").toggle(showOpenRouter);\n            }\n\n            $(document).on(\"change\", \"input[name=\\\"humata_local_second_llm_provider\\\"]\", humataToggleLocalSecondFields);\n            humataToggleLocalSecondFields();\n        })();\n\n        // -----------------------------------------------\n        // Floating Help + Auto Links + Intent Links helpers\n        // -----------------------------------------------\n\n        (function() {\n            function humataBuildExternalLinkRow(idx) {\n                return \"\" +\n                    \"<tr class=\\\"humata-repeater-row\\\">\" +\n                        \"<td class=\\\"humata-repeater-handle-cell\\\">\" +\n                            \"<span class=\\\"dashicons dashicons-move humata-repeater-handle\\\" aria-hidden=\\\"true\\\"></span>\" +\n                            \"<span class=\\\"screen-reader-text\\\">Drag to reorder</span>\" +\n                        \"</td>\" +\n                        \"<td style=\\\"width: 28%\\\">\" +\n                            \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_floating_help[external_links][\" + idx + \"][label]\\\" value=\\\"\\\" placeholder=\\\"Label\\\">\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                            \"<input type=\\\"url\\\" class=\\\"regular-text\\\" name=\\\"humata_floating_help[external_links][\" + idx + \"][url]\\\" value=\\\"\\\" placeholder=\\\"https://example.com/\\\">\" +\n                        \"</td>\" +\n                        \"<td style=\\\"width: 90px\\\">\" +\n                            \"<button type=\\\"button\\\" class=\\\"button link-delete humata-repeater-remove\\\">Remove</button>\" +\n                        \"</td>\" +\n                    \"</tr>\";\n            }\n\n            function humataBuildAutoLinkRow(idx) {\n                return \"\" +\n                    \"<tr class=\\\"humata-repeater-row\\\">\" +\n                        \"<td class=\\\"humata-repeater-handle-cell\\\">\" +\n                            \"<span class=\\\"dashicons dashicons-move humata-repeater-handle\\\" aria-hidden=\\\"true\\\"></span>\" +\n                            \"<span class=\\\"screen-reader-text\\\">Drag to reorder</span>\" +\n                        \"</td>\" +\n                        \"<td style=\\\"width: 38%\\\">\" +\n                            \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_auto_links[\" + idx + \"][phrase]\\\" value=\\\"\\\" placeholder=\\\"Phrase (exact match)\\\">\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                            \"<input type=\\\"url\\\" class=\\\"regular-text\\\" name=\\\"humata_auto_links[\" + idx + \"][url]\\\" value=\\\"\\\" placeholder=\\\"https://example.com/\\\">\" +\n                        \"</td>\" +\n                        \"<td style=\\\"width: 90px\\\">\" +\n                            \"<button type=\\\"button\\\" class=\\\"button link-delete humata-repeater-remove\\\">Remove</button>\" +\n                        \"</td>\" +\n                    \"</tr>\";\n            }\n\n            function humataBuildFaqRow(idx) {\n                return \"\" +\n                    \"<tr class=\\\"humata-repeater-row\\\">\" +\n                        \"<td class=\\\"humata-repeater-handle-cell\\\">\" +\n                            \"<span class=\\\"dashicons dashicons-move humata-repeater-handle\\\" aria-hidden=\\\"true\\\"></span>\" +\n                            \"<span class=\\\"screen-reader-text\\\">Drag to reorder</span>\" +\n                        \"</td>\" +\n                        \"<td style=\\\"width: 34%\\\">\" +\n                            \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_floating_help[faq_items][\" + idx + \"][question]\\\" value=\\\"\\\" placeholder=\\\"Question\\\">\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                            \"<textarea class=\\\"large-text\\\" rows=\\\"3\\\" name=\\\"humata_floating_help[faq_items][\" + idx + \"][answer]\\\" placeholder=\\\"Answer\\\"></textarea>\" +\n                        \"</td>\" +\n                        \"<td style=\\\"width: 90px\\\">\" +\n                            \"<button type=\\\"button\\\" class=\\\"button link-delete humata-repeater-remove\\\">Remove</button>\" +\n                        \"</td>\" +\n                    \"</tr>\";\n            }\n\n            function humataInitRepeaterSortable($container) {\n                if (!$container || !$container.length) return;\n                var $tbody = $container.find(\"tbody\");\n                if (!$tbody.length) return;\n                if (!$tbody.sortable) return;\n                if ($tbody.data(\"humataSortableInit\")) return;\n\n                $tbody.sortable({\n                    axis: \"y\",\n                    items: \"> tr\",\n                    handle: \".humata-repeater-handle\",\n                    placeholder: \"humata-repeater-placeholder\",\n                    forcePlaceholderSize: true,\n                    tolerance: \"pointer\"\n                });\n\n                try { $tbody.disableSelection(); } catch (e) {}\n                $tbody.data(\"humataSortableInit\", true);\n            }\n\n            function humataAddRepeaterRow($container) {\n                if (!$container || !$container.length) return;\n\n                var type = String($container.data(\"humataRepeater\") || \"\");\n                var nextIdx = humataSafeInt($container.attr(\"data-next-index\"), $container.find(\"tbody tr\").length);\n\n                var html = \"\";\n                if (type === \"external_links\") {\n                    html = humataBuildExternalLinkRow(nextIdx);\n                } else if (type === \"auto_links\") {\n                    html = humataBuildAutoLinkRow(nextIdx);\n                } else if (type === \"faq_items\") {\n                    html = humataBuildFaqRow(nextIdx);\n                }\n\n                if (!html) return;\n\n                var $tbody = $container.find(\"tbody\");\n                if (!$tbody.length) return;\n\n                $tbody.append(html);\n                $container.attr(\"data-next-index\", String(nextIdx + 1));\n                humataInitRepeaterSortable($container);\n            }\n\n            $(document).on(\"click\", \".humata-floating-help-repeater .humata-repeater-add\", function() {\n                humataAddRepeaterRow($(this).closest(\".humata-floating-help-repeater\"));\n            });\n\n            $(document).on(\"click\", \".humata-floating-help-repeater .humata-repeater-remove\", function() {\n                $(this).closest(\"tr\").remove();\n            });\n\n            // Initialize sortable for existing repeaters.\n            $(\".humata-floating-help-repeater\").each(function() {\n                humataInitRepeaterSortable($(this));\n            });\n\n            // Avatar/Logo uploader handlers.\n            $(document).on(\"click\", \".humata-upload-avatar\", function(e) {\n                e.preventDefault();\n                var targetId = $(this).data(\"target\");\n                var isLogo = targetId.indexOf(\"logo\") !== -1;\n                var title = isLogo ? \"Select Logo Image\" : \"Select Avatar Image\";\n                var frame = wp.media({\n                    title: title,\n                    button: { text: \"Use this image\" },\n                    multiple: false,\n                    library: { type: [\"image/jpeg\", \"image/png\", \"image/gif\", \"image/webp\"] }\n                });\n                frame.on(\"select\", function() {\n                    var attachment = frame.state().get(\"selection\").first().toJSON();\n                    $(\"#\" + targetId).val(attachment.url);\n                    var imgHtml = isLogo\n                        ? \"<img src=\\\"\" + attachment.url + \"\\\" alt=\\\"Logo Preview\\\" />\"\n                        : \"<img src=\\\"\" + attachment.url + \"\\\" style=\\\"max-width:64px;max-height:64px;border-radius:6px;\\\" />\";\n                    $(\"#\" + targetId + \"_preview\").html(imgHtml);\n                    $(\".humata-remove-avatar[data-target=\\\"\" + targetId + \"\\\"]\").show();\n                });\n                frame.open();\n            });\n\n            $(document).on(\"click\", \".humata-remove-avatar\", function(e) {\n                e.preventDefault();\n                var targetId = $(this).data(\"target\");\n                $(\"#\" + targetId).val(\"\");\n                $(\"#\" + targetId + \"_preview\").empty();\n                $(this).hide();\n            });\n\n            // Intent-Based Links repeater handlers.\n            function humataBuildIntentLinkRow(intentIdx, linkIdx) {\n                return \"\" +\n                    \"<tr class=\\\"humata-intent-link-row\\\">\" +\n                        \"<td>\" +\n                            \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][links][\" + linkIdx + \"][title]\\\" value=\\\"\\\" placeholder=\\\"Shipping Policy\\\">\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                            \"<input type=\\\"url\\\" class=\\\"regular-text\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][links][\" + linkIdx + \"][url]\\\" value=\\\"\\\" placeholder=\\\"https://example.com/shipping\\\">\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                            \"<button type=\\\"button\\\" class=\\\"button link-delete humata-intent-link-remove\\\">Remove</button>\" +\n                        \"</td>\" +\n                    \"</tr>\";\n            }\n\n            function humataBuildAccordionRow(intentIdx, accIdx) {\n                return \"\" +\n                    \"<tr class=\\\"humata-intent-accordion-row\\\">\" +\n                        \"<td>\" +\n                            \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][accordions][\" + accIdx + \"][title]\\\" value=\\\"\\\" placeholder=\\\"e.g., Shipping Restrictions\\\">\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                            \"<div class=\\\"humata-accordion-toolbar\\\">\" +\n                                \"<button type=\\\"button\\\" class=\\\"button button-small humata-format-bold\\\" title=\\\"Bold\\\"><strong>B</strong></button>\" +\n                                \"<button type=\\\"button\\\" class=\\\"button button-small humata-format-italic\\\" title=\\\"Italic\\\"><em>I</em></button>\" +\n                                \"<button type=\\\"button\\\" class=\\\"button button-small humata-format-link\\\" title=\\\"Insert Link\\\">\uD83D\uDD17</button>\" +\n                            \"</div>\" +\n                            \"<textarea class=\\\"large-text humata-accordion-content-input\\\" rows=\\\"3\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][accordions][\" + accIdx + \"][content]\\\" placeholder=\\\"Content shown when expanded... (supports formatting)\\\" maxlength=\\\"1000\\\"></textarea>\" +\n                        \"</td>\" +\n                        \"<td>\" +\n                            \"<button type=\\\"button\\\" class=\\\"button link-delete humata-intent-accordion-remove\\\">Remove</button>\" +\n                        \"</td>\" +\n                    \"</tr>\";\n            }\n\n            function humataBuildIntentCard(intentIdx) {\n                return \"\" +\n                    \"<div class=\\\"humata-intent-card\\\" data-intent-index=\\\"\" + intentIdx + \"\\\">\" +\n                        \"<div class=\\\"humata-intent-card-header\\\">\" +\n                            \"<button type=\\\"button\\\" class=\\\"humata-intent-toggle\\\" aria-expanded=\\\"true\\\" aria-label=\\\"Toggle intent\\\">\" +\n                                \"<span class=\\\"dashicons dashicons-arrow-down-alt2\\\"></span>\" +\n                            \"</button>\" +\n                            \"<span class=\\\"humata-intent-card-title\\\">Intent #\" + (intentIdx + 1) + \"</span>\" +\n                            \"<button type=\\\"button\\\" class=\\\"button link-delete humata-intent-remove\\\">Remove Intent</button>\" +\n                        \"</div>\" +\n                        \"<div class=\\\"humata-intent-card-body\\\">\" +\n                            \"<p>\" +\n                                \"<label><strong>Intent Name</strong></label><br>\" +\n                                \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][intent_name]\\\" value=\\\"\\\" placeholder=\\\"e.g., shipping_intent\\\">\" +\n                                \" <span class=\\\"description\\\">Internal label (not shown to users).</span>\" +\n                            \"</p>\" +\n                            \"<p>\" +\n                                \"<label><strong>Keywords</strong></label><br>\" +\n                                \"<textarea class=\\\"large-text\\\" rows=\\\"2\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][keywords]\\\" placeholder=\\\"shipping, ship, delivery, deliver, track, package\\\"></textarea>\" +\n                                \" <span class=\\\"description\\\">Comma-separated keywords. If any keyword appears in the user's question, the links below are shown.</span>\" +\n                            \"</p>\" +\n                            \"<div class=\\\"humata-intent-links-sub\\\" data-links-next-index=\\\"1\\\">\" +\n                                \"<label><strong>Resource Links</strong></label>\" +\n                                \"<table class=\\\"widefat striped humata-intent-links-table\\\" style=\\\"max-width: 800px; margin-top: 6px;\\\">\" +\n                                    \"<thead>\" +\n                                        \"<tr>\" +\n                                            \"<th>Title</th>\" +\n                                            \"<th>URL</th>\" +\n                                            \"<th style=\\\"width: 80px;\\\">Actions</th>\" +\n                                        \"</tr>\" +\n                                    \"</thead>\" +\n                                    \"<tbody>\" +\n                                        \"<tr class=\\\"humata-intent-link-row\\\">\" +\n                                            \"<td>\" +\n                                                \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][links][0][title]\\\" value=\\\"\\\" placeholder=\\\"Shipping Policy\\\">\" +\n                                            \"</td>\" +\n                                            \"<td>\" +\n                                                \"<input type=\\\"url\\\" class=\\\"regular-text\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][links][0][url]\\\" value=\\\"\\\" placeholder=\\\"https://example.com/shipping\\\">\" +\n                                            \"</td>\" +\n                                            \"<td>\" +\n                                                \"<button type=\\\"button\\\" class=\\\"button link-delete humata-intent-link-remove\\\">Remove</button>\" +\n                                            \"</td>\" +\n                                        \"</tr>\" +\n                                    \"</tbody>\" +\n                                \"</table>\" +\n                                \"<p style=\\\"margin-top: 8px;\\\">\" +\n                                    \"<button type=\\\"button\\\" class=\\\"button button-secondary humata-intent-link-add\\\">Add Link</button>\" +\n                                \"</p>\" +\n                            \"</div>\" +\n                            \"<div class=\\\"humata-intent-accordions-sub\\\" data-accordions-next-index=\\\"1\\\" style=\\\"margin-top: 20px;\\\">\" +\n                                \"<label><strong>Custom Accordions</strong></label>\" +\n                                \"<span class=\\\"description\\\" style=\\\"display: block; margin-bottom: 6px;\\\">FAQ-style collapsible toggles shown in the chat response.</span>\" +\n                                \"<table class=\\\"widefat striped humata-intent-accordions-table\\\" style=\\\"max-width: 800px; margin-top: 6px;\\\">\" +\n                                    \"<thead>\" +\n                                        \"<tr>\" +\n                                            \"<th style=\\\"width: 200px;\\\">Title</th>\" +\n                                            \"<th>Content</th>\" +\n                                            \"<th style=\\\"width: 80px;\\\">Actions</th>\" +\n                                        \"</tr>\" +\n                                    \"</thead>\" +\n                                    \"<tbody>\" +\n                                        \"<tr class=\\\"humata-intent-accordion-row\\\">\" +\n                                            \"<td>\" +\n                                                \"<input type=\\\"text\\\" class=\\\"regular-text\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][accordions][0][title]\\\" value=\\\"\\\" placeholder=\\\"e.g., Shipping Restrictions\\\">\" +\n                                            \"</td>\" +\n                                            \"<td>\" +\n                                                \"<div class=\\\"humata-accordion-toolbar\\\">\" +\n                                                    \"<button type=\\\"button\\\" class=\\\"button button-small humata-format-bold\\\" title=\\\"Bold\\\"><strong>B</strong></button>\" +\n                                                    \"<button type=\\\"button\\\" class=\\\"button button-small humata-format-italic\\\" title=\\\"Italic\\\"><em>I</em></button>\" +\n                                                    \"<button type=\\\"button\\\" class=\\\"button button-small humata-format-link\\\" title=\\\"Insert Link\\\">\uD83D\uDD17</button>\" +\n                                                \"</div>\" +\n                                                \"<textarea class=\\\"large-text humata-accordion-content-input\\\" rows=\\\"3\\\" name=\\\"humata_intent_links[\" + intentIdx + \"][accordions][0][content]\\\" placeholder=\\\"Content shown when expanded... (supports formatting)\\\" maxlength=\\\"1000\\\"></textarea>\" +\n                                            \"</td>\" +\n                                            \"<td>\" +\n                                                \"<button type=\\\"button\\\" class=\\\"button link-delete humata-intent-accordion-remove\\\">Remove</button>\" +\n                                            \"</td>\" +\n                                        \"</tr>\" +\n                                    \"</tbody>\" +\n                                \"</table>\" +\n                                \"<p style=\\\"margin-top: 8px;\\\">\" +\n                                    \"<button type=\\\"button\\\" class=\\\"button button-secondary humata-intent-accordion-add\\\">Add Accordion</button>\" +\n                                \"</p>\" +\n                            \"</div>\" +\n                        \"</div>\" +\n                    \"</div>\";\n            }\n\n            // Add new intent\n            $(document).on(\"click\", \".humata-intent-add\", function() {\n                var $repeater = $(this).closest(\".humata-intent-links-repeater\");\n                var $container = $repeater.find(\".humata-intent-links-container\");\n                var nextIdx = humataSafeInt($repeater.attr(\"data-next-index\"), $container.find(\".humata-intent-card\").length);\n\n                $container.append(humataBuildIntentCard(nextIdx));\n                $repeater.attr(\"data-next-index\", String(nextIdx + 1));\n            });\n\n            // Remove intent\n            $(document).on(\"click\", \".humata-intent-remove\", function() {\n                $(this).closest(\".humata-intent-card\").remove();\n            });\n\n            // Add link within an intent\n            $(document).on(\"click\", \".humata-intent-link-add\", function() {\n                var $sub = $(this).closest(\".humata-intent-links-sub\");\n                var $tbody = $sub.find(\"tbody\");\n                var $card = $(this).closest(\".humata-intent-card\");\n                var intentIdx = humataSafeInt($card.attr(\"data-intent-index\"), 0);\n                var linkIdx = humataSafeInt($sub.attr(\"data-links-next-index\"), $tbody.find(\"tr\").length);\n\n                $tbody.append(humataBuildIntentLinkRow(intentIdx, linkIdx));\n                $sub.attr(\"data-links-next-index\", String(linkIdx + 1));\n            });\n\n            // Remove link within an intent\n            $(document).on(\"click\", \".humata-intent-link-remove\", function() {\n                var $tbody = $(this).closest(\"tbody\");\n                $(this).closest(\"tr\").remove();\n                // Ensure at least one row remains\n                if ($tbody.find(\"tr\").length === 0) {\n                    var $card = $tbody.closest(\".humata-intent-card\");\n                    var $sub = $tbody.closest(\".humata-intent-links-sub\");\n                    var intentIdx = humataSafeInt($card.attr(\"data-intent-index\"), 0);\n                    $tbody.append(humataBuildIntentLinkRow(intentIdx, 0));\n                    $sub.attr(\"data-links-next-index\", \"1\");\n                }\n            });\n\n            // Add accordion within an intent\n            $(document).on(\"click\", \".humata-intent-accordion-add\", function() {\n                var $sub = $(this).closest(\".humata-intent-accordions-sub\");\n                var $tbody = $sub.find(\"tbody\");\n                var $card = $(this).closest(\".humata-intent-card\");\n                var intentIdx = humataSafeInt($card.attr(\"data-intent-index\"), 0);\n                var accIdx = humataSafeInt($sub.attr(\"data-accordions-next-index\"), $tbody.find(\"tr\").length);\n\n                // Limit to 5 accordions per intent\n                if ($tbody.find(\"tr\").length >= 5) {\n                    return;\n                }\n\n                $tbody.append(humataBuildAccordionRow(intentIdx, accIdx));\n                $sub.attr(\"data-accordions-next-index\", String(accIdx + 1));\n            });\n\n            // Remove accordion within an intent\n            $(document).on(\"click\", \".humata-intent-accordion-remove\", function() {\n                var $tbody = $(this).closest(\"tbody\");\n                $(this).closest(\"tr\").remove();\n                // Ensure at least one row remains\n                if ($tbody.find(\"tr\").length === 0) {\n                    var $card = $tbody.closest(\".humata-intent-card\");\n                    var $sub = $tbody.closest(\".humata-intent-accordions-sub\");\n                    var intentIdx = humataSafeInt($card.attr(\"data-intent-index\"), 0);\n                    $tbody.append(humataBuildAccordionRow(intentIdx, 0));\n                    $sub.attr(\"data-accordions-next-index\", \"1\");\n                }\n            });\n\n            // Accordion content formatting toolbar\n            function humataWrapSelection(textarea, before, after) {\n                var start = textarea.selectionStart;\n                var end = textarea.selectionEnd;\n                var text = textarea.value;\n                var selected = text.substring(start, end);\n\n                if (!selected) {\n                    selected = \"text\";\n                }\n\n                var newText = text.substring(0, start) + before + selected + after + text.substring(end);\n                textarea.value = newText;\n                textarea.focus();\n                textarea.setSelectionRange(start + before.length, start + before.length + selected.length);\n            }\n\n            // Format selected text with bold\n            $(document).on(\"click\", \".humata-format-bold\", function() {\n                var $textarea = $(this).closest(\"td\").find(\"textarea\");\n                if ($textarea.length) {\n                    humataWrapSelection($textarea[0], \"<strong>\", \"</strong>\");\n                }\n            });\n\n            // Format selected text with italic\n            $(document).on(\"click\", \".humata-format-italic\", function() {\n                var $textarea = $(this).closest(\"td\").find(\"textarea\");\n                if ($textarea.length) {\n                    humataWrapSelection($textarea[0], \"<em>\", \"</em>\");\n                }\n            });\n\n            // Insert link around selected text\n            $(document).on(\"click\", \".humata-format-link\", function() {\n                var $textarea = $(this).closest(\"td\").find(\"textarea\");\n                if ($textarea.length) {\n                    var url = prompt(\"Enter URL:\", \"https://\");\n                    if (url && url !== \"https://\") {\n                        humataWrapSelection($textarea[0], \"<a href=\\\"\" + url + \"\\\" target=\\\"_blank\\\">\", \"</a>\");\n                    }\n                }\n            });\n\n            // -----------------------------------------------\n            // Trigger Pages repeater handlers\n            // -----------------------------------------------\n\n            function humataInitTriggerPagesSortable() {\n                var $list = $(\".humata-trigger-pages-list\");\n                if (!$list.length || !$list.sortable) return;\n                if ($list.data(\"humataSortableInit\")) return;\n\n                $list.sortable({\n                    axis: \"y\",\n                    items: \"> .humata-trigger-page-item\",\n                    handle: \".humata-repeater-handle\",\n                    placeholder: \"humata-repeater-placeholder\",\n                    forcePlaceholderSize: true,\n                    tolerance: \"pointer\",\n                    update: function() {\n                        // Reindex the form fields after reordering\n                        humataReindexTriggerPages();\n                    }\n                });\n\n                try { $list.disableSelection(); } catch (e) {}\n                $list.data(\"humataSortableInit\", true);\n            }\n\n            function humataReindexTriggerPages() {\n                $(\".humata-trigger-pages-list .humata-trigger-page-item\").each(function(idx) {\n                    var $item = $(this);\n                    // Update input names\n                    $item.find(\"input[name*=\\\"humata_trigger_pages\\\"]\").each(function() {\n                        var name = $(this).attr(\"name\");\n                        name = name.replace(/humata_trigger_pages\\[\\d+\\]/, \"humata_trigger_pages[\" + idx + \"]\");\n                        $(this).attr(\"name\", name);\n                    });\n                    // Update textarea names (for wp_editor fallback)\n                    $item.find(\"textarea[name*=\\\"humata_trigger_pages\\\"]\").each(function() {\n                        var name = $(this).attr(\"name\");\n                        name = name.replace(/humata_trigger_pages\\[\\d+\\]/, \"humata_trigger_pages[\" + idx + \"]\");\n                        $(this).attr(\"name\", name);\n                    });\n                });\n                // Update next index\n                var $repeater = $(\".humata-trigger-pages-repeater\");\n                $repeater.attr(\"data-next-index\", String($(\".humata-trigger-pages-list .humata-trigger-page-item\").length));\n            }\n\n            // Remove trigger page\n            $(document).on(\"click\", \".humata-trigger-pages-repeater .humata-repeater-remove\", function() {\n                var $item = $(this).closest(\".humata-trigger-page-item\");\n                var editorId = $item.find(\".wp-editor-area\").attr(\"id\");\n\n                // Remove TinyMCE instance if exists\n                if (editorId && typeof tinymce !== \"undefined\" && tinymce.get(editorId)) {\n                    tinymce.get(editorId).remove();\n                }\n\n                $item.remove();\n                humataReindexTriggerPages();\n            });\n\n            // Add trigger page - scroll to the last empty row since one is always available\n            $(document).on(\"click\", \".humata-trigger-pages-add\", function() {\n                var $lastItem = $(\".humata-trigger-pages-list .humata-trigger-page-item\").last();\n                if ($lastItem.length) {\n                    $lastItem[0].scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n                    $lastItem.find(\"input[type=\\\"text\\\"]\").first().focus();\n                }\n            });\n\n            // Initialize sortable for trigger pages\n            humataInitTriggerPagesSortable();\n\n            // Intent collapse state persistence\n            var INTENT_COLLAPSE_KEY = \"humata_intent_collapsed\";\n\n            function humataGetCollapsedIntents() {\n                try {\n                    var stored = localStorage.getItem(INTENT_COLLAPSE_KEY);\n                    if (stored) {\n                        var parsed = JSON.parse(stored);\n                        if (Array.isArray(parsed)) {\n                            return parsed;\n                        }\n                    }\n                } catch (e) {}\n                return [];\n            }\n\n            function humataSaveCollapsedIntents(indices) {\n                try {\n                    localStorage.setItem(INTENT_COLLAPSE_KEY, JSON.stringify(indices));\n                } catch (e) {}\n            }\n\n            function humataCollapseCard($card) {\n                var $btn = $card.find(\".humata-intent-toggle\");\n                $card.addClass(\"humata-intent-collapsed\");\n                $btn.attr(\"aria-expanded\", \"false\");\n                $btn.find(\".dashicons\").removeClass(\"dashicons-arrow-down-alt2\").addClass(\"dashicons-arrow-right-alt2\");\n            }\n\n            function humataExpandCard($card) {\n                var $btn = $card.find(\".humata-intent-toggle\");\n                $card.removeClass(\"humata-intent-collapsed\");\n                $btn.attr(\"aria-expanded\", \"true\");\n                $btn.find(\".dashicons\").removeClass(\"dashicons-arrow-right-alt2\").addClass(\"dashicons-arrow-down-alt2\");\n            }\n\n            // Restore collapsed state on page load\n            (function() {\n                var collapsed = humataGetCollapsedIntents();\n                if (!collapsed.length) return;\n\n                $(\".humata-intent-card\").each(function() {\n                    var idx = humataSafeInt($(this).attr(\"data-intent-index\"), -1);\n                    if (idx >= 0 && collapsed.indexOf(idx) !== -1) {\n                        humataCollapseCard($(this));\n                    }\n                });\n            })();\n\n            // Toggle intent card collapse/expand\n            $(document).on(\"click\", \".humata-intent-toggle\", function() {\n                var $btn = $(this);\n                var $card = $btn.closest(\".humata-intent-card\");\n                var isExpanded = $btn.attr(\"aria-expanded\") === \"true\";\n                var idx = humataSafeInt($card.attr(\"data-intent-index\"), -1);\n\n                if (isExpanded) {\n                    humataCollapseCard($card);\n                } else {\n                    humataExpandCard($card);\n                }\n\n                // Persist to localStorage\n                var collapsed = humataGetCollapsedIntents();\n                var pos = collapsed.indexOf(idx);\n                if (isExpanded && pos === -1) {\n                    collapsed.push(idx);\n                } else if (!isExpanded && pos !== -1) {\n                    collapsed.splice(pos, 1);\n                }\n                humataSaveCollapsedIntents(collapsed);\n            });\n        })();\n\n        // ------------------------------------------\n        // Suggested Questions Tab Handlers\n        // ------------------------------------------\n        (function() {\n            // Mode toggle: show/hide sections based on selected mode\n            function humataUpdateSqSections() {\n                var mode = $('input[name=\"humata_suggested_questions[mode]\"]:checked').val() || 'fixed';\n                var $fixedSection = $('#humata_sq_fixed_questions').closest('tr').parent().closest('table').prev('h2').addBack().add($('#humata_sq_fixed_questions').closest('tr'));\n                var $randomizedSection = $('#humata_sq_randomized_categories').closest('tr').parent().closest('table').prev('h2').addBack().add($('#humata_sq_randomized_categories').closest('tr'));\n\n                // Simple approach: toggle visibility of the section wrappers\n                $('.humata-sq-fixed-section').closest('tr').toggle(mode === 'fixed');\n                $('.humata-sq-randomized-section').closest('tr').toggle(mode === 'randomized');\n            }\n\n            $(document).on('change', '.humata-sq-mode-radio', humataUpdateSqSections);\n            humataUpdateSqSections();\n\n            // Fixed mode: Add question\n            $(document).on('click', '.humata-sq-fixed-add', function() {\n                var $section = $(this).closest('.humata-sq-fixed-section');\n                var $tbody = $section.find('tbody');\n                var rowCount = $tbody.find('tr').length;\n\n                // Max 4 questions\n                if (rowCount >= 4) {\n                    return;\n                }\n\n                var nextIdx = humataSafeInt($section.attr('data-next-index'), rowCount);\n                var html = '' +\n                    '<tr class=\"humata-repeater-row humata-sq-fixed-row\">' +\n                        '<td class=\"humata-repeater-handle-cell\">' +\n                            '<span class=\"dashicons dashicons-move humata-repeater-handle\" aria-hidden=\"true\"></span>' +\n                            '<span class=\"screen-reader-text\">Drag to reorder</span>' +\n                        '</td>' +\n                        '<td>' +\n                            '<input type=\"text\" class=\"large-text\" name=\"humata_suggested_questions[fixed_questions][' + nextIdx + '][text]\" value=\"\" placeholder=\"e.g., What are your business hours?\" maxlength=\"150\">' +\n                        '</td>' +\n                        '<td>' +\n                            '<button type=\"button\" class=\"button link-delete humata-repeater-remove\">Remove</button>' +\n                        '</td>' +\n                    '</tr>';\n\n                $tbody.append(html);\n                $section.attr('data-next-index', String(nextIdx + 1));\n            });\n\n            // Fixed mode: Remove question\n            $(document).on('click', '.humata-sq-fixed-section .humata-repeater-remove', function() {\n                $(this).closest('tr').remove();\n            });\n\n            // Fixed mode: Sortable\n            if ($.fn.sortable) {\n                $('.humata-sq-fixed-section tbody').sortable({\n                    handle: '.humata-repeater-handle',\n                    axis: 'y',\n                    cursor: 'move',\n                    opacity: 0.7\n                });\n            }\n\n            // Randomized mode: Add category\n            $(document).on('click', '.humata-sq-category-add', function() {\n                var $section = $(this).closest('.humata-sq-randomized-section');\n                var $container = $section.find('.humata-sq-categories-container');\n                var catCount = $container.find('.humata-sq-category-card').length;\n\n                // Max 4 categories\n                if (catCount >= 4) {\n                    return;\n                }\n\n                var nextIdx = humataSafeInt($section.attr('data-next-cat-index'), catCount);\n                var html = humataBuildSqCategoryCard(nextIdx);\n\n                $container.append(html);\n                $section.attr('data-next-cat-index', String(nextIdx + 1));\n            });\n\n            // Randomized mode: Remove category\n            $(document).on('click', '.humata-sq-category-remove', function() {\n                $(this).closest('.humata-sq-category-card').remove();\n            });\n\n            // Randomized mode: Add question within category\n            $(document).on('click', '.humata-sq-question-add', function() {\n                var $sub = $(this).closest('.humata-sq-questions-sub');\n                var $tbody = $sub.find('tbody');\n                var $card = $(this).closest('.humata-sq-category-card');\n                var catIdx = humataSafeInt($card.attr('data-cat-index'), 0);\n                var qIdx = humataSafeInt($sub.attr('data-next-q-index'), $tbody.find('tr').length);\n\n                // Max 20 questions per category\n                if ($tbody.find('tr').length >= 20) {\n                    return;\n                }\n\n                var html = humataBuildSqQuestionRow(catIdx, qIdx);\n                $tbody.append(html);\n                $sub.attr('data-next-q-index', String(qIdx + 1));\n            });\n\n            // Randomized mode: Remove question within category\n            $(document).on('click', '.humata-sq-question-remove', function() {\n                var $tbody = $(this).closest('tbody');\n                $(this).closest('tr').remove();\n\n                // Ensure at least one row remains\n                if ($tbody.find('tr').length === 0) {\n                    var $card = $tbody.closest('.humata-sq-category-card');\n                    var $sub = $tbody.closest('.humata-sq-questions-sub');\n                    var catIdx = humataSafeInt($card.attr('data-cat-index'), 0);\n                    $tbody.append(humataBuildSqQuestionRow(catIdx, 0));\n                    $sub.attr('data-next-q-index', '1');\n                }\n            });\n\n            // Randomized mode: Toggle category collapse/expand\n            $(document).on('click', '.humata-sq-category-toggle', function() {\n                var $btn = $(this);\n                var $card = $btn.closest('.humata-sq-category-card');\n                var isExpanded = $btn.attr('aria-expanded') === 'true';\n\n                if (isExpanded) {\n                    $card.addClass('humata-sq-category-collapsed');\n                    $btn.attr('aria-expanded', 'false');\n                    $btn.find('.dashicons').removeClass('dashicons-arrow-down-alt2').addClass('dashicons-arrow-right-alt2');\n                } else {\n                    $card.removeClass('humata-sq-category-collapsed');\n                    $btn.attr('aria-expanded', 'true');\n                    $btn.find('.dashicons').removeClass('dashicons-arrow-right-alt2').addClass('dashicons-arrow-down-alt2');\n                }\n            });\n\n            function humataBuildSqQuestionRow(catIdx, qIdx) {\n                return '' +\n                    '<tr class=\"humata-sq-question-row\">' +\n                        '<td>' +\n                            '<input type=\"text\" class=\"large-text\" name=\"humata_suggested_questions[categories][' + catIdx + '][questions][' + qIdx + ']\" value=\"\" placeholder=\"e.g., How do I track my order?\" maxlength=\"150\">' +\n                        '</td>' +\n                        '<td>' +\n                            '<button type=\"button\" class=\"button link-delete humata-sq-question-remove\">Remove</button>' +\n                        '</td>' +\n                    '</tr>';\n            }\n\n            function humataBuildSqCategoryCard(catIdx) {\n                return '' +\n                    '<div class=\"humata-sq-category-card\" data-cat-index=\"' + catIdx + '\">' +\n                        '<div class=\"humata-sq-category-header\">' +\n                            '<button type=\"button\" class=\"humata-sq-category-toggle\" aria-expanded=\"true\" aria-label=\"Toggle category\">' +\n                                '<span class=\"dashicons dashicons-arrow-down-alt2\"></span>' +\n                            '</button>' +\n                            '<span class=\"humata-sq-category-title\">Category #' + (catIdx + 1) + '</span>' +\n                            '<button type=\"button\" class=\"button link-delete humata-sq-category-remove\">Remove Category</button>' +\n                        '</div>' +\n                        '<div class=\"humata-sq-category-body\">' +\n                            '<p>' +\n                                '<label><strong>Category Name</strong> <span class=\"description\">(optional)</span></label><br>' +\n                                '<input type=\"text\" class=\"regular-text\" name=\"humata_suggested_questions[categories][' + catIdx + '][name]\" value=\"\" placeholder=\"e.g., Product Questions\" maxlength=\"50\">' +\n                            '</p>' +\n                            '<div class=\"humata-sq-questions-sub\" data-next-q-index=\"1\">' +\n                                '<label><strong>Questions</strong></label>' +\n                                '<p class=\"description\">At least 1 question required per category.</p>' +\n                                '<table class=\"widefat striped humata-sq-questions-table\" style=\"max-width: 650px; margin-top: 6px;\">' +\n                                    '<thead>' +\n                                        '<tr>' +\n                                            '<th>Question Text</th>' +\n                                            '<th style=\"width: 80px;\">Actions</th>' +\n                                        '</tr>' +\n                                    '</thead>' +\n                                    '<tbody>' +\n                                        '<tr class=\"humata-sq-question-row\">' +\n                                            '<td>' +\n                                                '<input type=\"text\" class=\"large-text\" name=\"humata_suggested_questions[categories][' + catIdx + '][questions][0]\" value=\"\" placeholder=\"e.g., How do I track my order?\" maxlength=\"150\">' +\n                                            '</td>' +\n                                            '<td>' +\n                                                '<button type=\"button\" class=\"button link-delete humata-sq-question-remove\">Remove</button>' +\n                                            '</td>' +\n                                        '</tr>' +\n                                    '</tbody>' +\n                                '</table>' +\n                                '<p style=\"margin-top: 8px;\">' +\n                                    '<button type=\"button\" class=\"button button-secondary humata-sq-question-add\">Add Question</button>' +\n                                '</p>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>';\n            }\n        })();\n\n        // ---------------------------\n        // API Key Pool Repeater Handlers\n        // ---------------------------\n\n        (function() {\n            /**\n             * Build a new API key row HTML.\n             *\n             * @param {string} optionName The option name for the field.\n             * @param {number} index The row index.\n             * @returns {string} HTML string.\n             */\n            function buildApiKeyRow(optionName, index) {\n                return '' +\n                    '<div class=\"humata-api-key-pool__row\">' +\n                        '<input' +\n                            ' type=\"password\"' +\n                            ' id=\"' + optionName + '_' + index + '\"' +\n                            ' name=\"' + optionName + '[]\"' +\n                            ' value=\"\"' +\n                            ' class=\"regular-text humata-api-key-pool__input\"' +\n                            ' autocomplete=\"off\"' +\n                            ' placeholder=\"API Key\"' +\n                        '/>' +\n                        '<button type=\"button\" class=\"button humata-api-key-pool__remove\" title=\"Remove\">' +\n                            '<span class=\"dashicons dashicons-trash\"></span>' +\n                        '</button>' +\n                    '</div>';\n            }\n\n            /**\n             * Update the key count display for a pool.\n             *\n             * @param {jQuery} $pool The pool container element.\n             */\n            function updateKeyCount($pool) {\n                var $count = $pool.find('.humata-api-key-pool__count');\n                var filledKeys = $pool.find('.humata-api-key-pool__input').filter(function() {\n                    return $.trim($(this).val()) !== '';\n                }).length;\n\n                if (filledKeys > 1) {\n                    if (!$count.length) {\n                        $count = $('<span class=\"humata-api-key-pool__count\"></span>');\n                        $pool.find('.humata-api-key-pool__add').after($count);\n                    }\n                    $count.text(filledKeys + ' keys configured (rotation enabled)').show();\n                } else {\n                    $count.hide();\n                }\n            }\n\n            // Add new API key row.\n            $(document).on('click', '.humata-api-key-pool__add', function() {\n                var $pool = $(this).closest('.humata-api-key-pool');\n                var optionName = $pool.data('option') || '';\n                var $keys = $pool.find('.humata-api-key-pool__keys');\n                var nextIndex = $keys.find('.humata-api-key-pool__row').length;\n\n                $keys.append(buildApiKeyRow(optionName, nextIndex));\n                updateKeyCount($pool);\n\n                // Focus the new input.\n                $keys.find('.humata-api-key-pool__row').last().find('input').focus();\n            });\n\n            // Remove API key row.\n            $(document).on('click', '.humata-api-key-pool__remove', function() {\n                var $pool = $(this).closest('.humata-api-key-pool');\n                var $row = $(this).closest('.humata-api-key-pool__row');\n                var $rows = $pool.find('.humata-api-key-pool__row');\n\n                // Keep at least one empty row.\n                if ($rows.length <= 1) {\n                    $row.find('input').val('');\n                } else {\n                    $row.remove();\n                }\n\n                updateKeyCount($pool);\n            });\n\n            // Update count on input change.\n            $(document).on('input', '.humata-api-key-pool__input', function() {\n                var $pool = $(this).closest('.humata-api-key-pool');\n                updateKeyCount($pool);\n            });\n\n            // Initialize counts on page load.\n            $('.humata-api-key-pool').each(function() {\n                updateKeyCount($(this));\n            });\n        })();\n\n        // ------------------------------------------\n        // Follow-Up Questions Provider Toggle\n        // ------------------------------------------\n        (function() {\n            var $providerRadios = $('.humata-followup-provider-radio');\n            if (!$providerRadios.length) {\n                return;\n            }\n\n            function updateFollowupProviderFields() {\n                var selectedProvider = $('input[name=\"humata_followup_questions[provider]\"]:checked').val() || 'straico';\n\n                var $straicoFields = $('.humata-followup-straico-fields');\n                var $anthropicFields = $('.humata-followup-anthropic-fields');\n                var $openrouterFields = $('.humata-followup-openrouter-fields');\n\n                $straicoFields.closest('tr').toggle(selectedProvider === 'straico');\n                $anthropicFields.closest('tr').toggle(selectedProvider === 'anthropic');\n                $openrouterFields.closest('tr').toggle(selectedProvider === 'openrouter');\n            }\n\n            // Bind change event.\n            $providerRadios.on('change', updateFollowupProviderFields);\n\n            // Initialize on page load.\n            updateFollowupProviderFields();\n        })();\n    });\n})(jQuery);\n\n\n"],
  "mappings": "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",
  "names": ["$", "config", "humataAdminNonce", "ajaxurl", "humataSafeInt", "value", "fallback", "n", "humataTitles", "humataTitleNotFetchedText", "humataDocsPerPage", "humataDocsPage", "humataExtractIds", "text", "matches", "seen", "unique", "_", "id", "humataGetTokenIds", "humataGetLabelForId", "humataSortTokens", "$container", "tokens", "a", "b", "aId", "bId", "aLabel", "bLabel", "el", "humataAddToken", "$token", "$label", "$remove", "humataSyncHiddenAndCount", "ids", "humataRenderDocumentsPagination", "total", "$pager", "totalPages", "currentPage", "start", "end", "$prev", "$next", "$info", "humataSyncDocumentsTable", "$tbody", "startIndex", "endIndex", "pageIds", "title", "$row", "humataAddTokensFromText", "humataInitTokensFromHidden", "$hidden", "$tokens", "key", "val", "added", "$last", "$input", "humataSetIoStatus", "message", "kind", "$status", "humataExportIdsToText", "humataDownloadFile", "filename", "content", "mimeType", "mime", "blob", "url", "e", "humataCopyToClipboard", "humataPromptManualCopy", "resolve", "reject", "isMac", "shortcut", "humataShowCopyToast", "$temp", "handleCopy", "cleanup", "handleKeydown", "humataHideCopyToast", "$toast", "humataGetImportMode", "$checked", "mode", "humataApplyImportedText", "importText", "importMode", "existingCount", "beforeCount", "afterCount", "addedCount", "dupCount", "count", "json", "input", "file", "reader", "$btn", "$result", "response", "offset", "limit", "delayMs", "documentIds", "fetchBatch", "msg", "docId", "successMsg", "humataGetSearchProvider", "$selected", "humataToggleSearchProviderSections", "provider", "isHumata", "isLocal", "$table", "$heading", "headingText", "humataGetSecondLlmProvider", "humataToggleSecondLlmFields", "showStraico", "showAnthropic", "showOpenRouter", "humataGetLocalFirstProvider", "humataToggleLocalFirstFields", "humataGetLocalSecondProvider", "humataToggleLocalSecondFields", "humataBuildExternalLinkRow", "idx", "humataBuildAutoLinkRow", "humataBuildFaqRow", "humataInitRepeaterSortable", "humataAddRepeaterRow", "type", "nextIdx", "html", "targetId", "isLogo", "frame", "attachment", "imgHtml", "humataBuildIntentLinkRow", "intentIdx", "linkIdx", "humataBuildAccordionRow", "accIdx", "humataBuildIntentCard", "$repeater", "$sub", "$card", "humataWrapSelection", "textarea", "before", "after", "selected", "newText", "$textarea", "humataInitTriggerPagesSortable", "$list", "humataReindexTriggerPages", "$item", "name", "editorId", "$lastItem", "INTENT_COLLAPSE_KEY", "humataGetCollapsedIntents", "stored", "parsed", "humataSaveCollapsedIntents", "indices", "humataCollapseCard", "humataExpandCard", "collapsed", "isExpanded", "pos", "humataUpdateSqSections", "$fixedSection", "$randomizedSection", "$section", "rowCount", "catCount", "humataBuildSqCategoryCard", "catIdx", "qIdx", "humataBuildSqQuestionRow", "buildApiKeyRow", "optionName", "index", "updateKeyCount", "$pool", "$count", "filledKeys", "$keys", "nextIndex", "$rows", "$providerRadios", "updateFollowupProviderFields", "selectedProvider", "$straicoFields", "$anthropicFields", "$openrouterFields"]
}
